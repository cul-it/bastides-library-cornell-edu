<% @project = render_document_show_field_value(:document => @document, :field => 'project_id_ssi') %>
<% @download_url = render_document_show_field_value(:document => @document, :field => 'download_link_tesim') %>
<% @download_url = render_document_show_field_value(:document => @document, :field => 'download_link_tesim') %>


<%# display image viewer %>
<% @asset = request.original_url.split('ss')[1].split(':')[1] %>
  <div id="image-toolbar">
    <div class="image-controls">
      <a href="<%= @download_url %>" class="download-link" title="Download">Download<i class="fa fa-download"></i></a>
      <a id="zoom-in" href="#zoom-in"><i class="fa fa-plus-circle"></i></a>
      <a id="zoom-out" href="#zoom-out"><i class="fa fa-minus-circle"></i></a>
      <a id="home" href="#home"><i class="fa fa-refresh"></i></a>
      <a id="full-page" href="#full-page"><i class="fa fa-expand"></i></a>
    </div>
  </div>
  <div id="openseadragon1"></div>
  <script>
    //<![CDATA[
    function initOpenSeadragon() {
    OpenSeadragon ({
          id: "openseadragon1",
          toolbar: "image-toolbar",
          zoomInButton:   "zoom-in",
          zoomOutButton:  "zoom-out",
          homeButton:     "home",
          fullPageButton: "full-page",
          minZoomImageRatio: 1,
          prefixUrl: "/images/",
          tileSources: "<%= render_document_show_field_value(:document => @document, :field => 'content_metadata_image_iiif_info_ssm') %>"
        });
    }
    window.onload = initOpenSeadragon;
    document.addEventListener("page:load", initOpenSeadragon); // Initialize when using turbolinks
    //]]>
  </script>
